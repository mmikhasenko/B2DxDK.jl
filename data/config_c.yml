data:
    dat_order: [D, K, D0, pi]
    model: cfit
    data: [["../data_DpKm/data_run1.dat"],["../data_DpKm/data_run2.dat"], ["../data_DpKm/data_run1_K3pi.dat"], ["../data_DpKm/data_run2_K3pi.dat"]] # ,["../data_DpKm/data_run1_K3pi.dat"],["../data_DpKm/data_run2_K3pi.dat"]] 
    data_charge: [["../data_DpKm/data_charge_run1.dat"],["../data_DpKm/data_charge_run2.dat"], ["../data_DpKm/data_charge_run1_K3pi.dat"], ["../data_DpKm/data_charge_run2_K3pi.dat"]] # ,["../data_DpKm/data_charge_run1_K3pi.dat"],["../data_DpKm/data_charge_run2_K3pi.dat"]] 
    data_bg_value: ["../data_DpKm/data_run1_bgv.dat", "../data_DpKm/data_run2_bgv.dat", "../data_DpKm/data_run1_K3pi_bgv.dat", "../data_DpKm/data_run2_K3pi_bgv.dat"]
    bg_frac: [0.04263284662802087, 0.059541714463085184, 0.05596024437633543, 0.05303877871114457]
    phsp: [["../data_DpKm/eff_run1.txt"], ["../data_DpKm/eff_run2.txt"], ["../data_DpKm/eff_run1_K3pi.txt"], ["../data_DpKm/eff_run2_K3pi.txt"]] # , ["../data_DpKm/eff_run1_K3pi.txt"], ["../data_DpKm/eff_run2_K3pi.txt"]]
    phsp_charge: [["../data_DpKm/eff_run1_c.txt"], ["../data_DpKm/eff_run2_c.txt"], ["../data_DpKm/eff_run1_K3pi_c.txt"], ["../data_DpKm/eff_run2_K3pi_c.txt"]] # , ["../data_DpKm/eff_run1_K3pi_c.txt"], ["../data_DpKm/eff_run2_K3pi_c.txt"]] # , ["../data_DpKm/eff_run1_K3pi_c.txt"], ["../data_DpKm/eff_run2_K3pi_c.txt"]]
    phsp_weight: ["../data_DpKm/eff_run1_w.txt", "../data_DpKm/eff_run2_w.txt" , "../data_DpKm/eff_run1_K3pi_w.txt", "../data_DpKm/eff_run2_K3pi_w.txt"] #"../data_DpKm/evt_run1_K3pi_wd_20.dat", "../data_DpKm/evt_run2_K3pi_wd_20.dat"] # "../data_DpKm/eff_run1_K3pi_w.txt", "../data_DpKm/eff_run2_K3pi_w.txt"]
    phsp_bg_value: ["../data_DpKm/eff_run1_bgv.dat", "../data_DpKm/eff_run2_bgv.dat", "../data_DpKm/eff_run1_K3pi_bgv.dat", "../data_DpKm/eff_run2_K3pi_bgv.dat"]
    phsp_noeff: ["../../combine2/data/flat_mc.dat"]
    # cached_amp: True


decay:
    Bp: 
      - [DstD, K, p_break: True, barrier_factor_norm: True]
      - [DstK, D, p_break: True, barrier_factor_norm: True]
      - [DK, Dst, p_break: True] # , barrier_factor_norm: True]
    DstD: [Dst, D, barrier_factor_norm: True]
    DstK: [Dst, K, barrier_factor_norm: True]
    DK: [D, K, barrier_factor_norm: True]
    Dst: [D0, pi, has_barrier_factor: False]

point_pos: &point_pos1
    points: [3.88, 3.921920479893773681, 3.951273946104949975, 3.979379107428977047, 4.00886081592041954, 4.034504379567633414,  4.083247089179264044, 4.133844266185713323,  4.196026501987756063, 4.260746661794484247, 4.315129233483468774, 4.369172476252923154, 4.420624705389251119, 4.489505297922118388, 4.561564209788138591, 4.639517200049882106, 4.78 ]


particle:
    $top:
        Bp:
            display: "$B^{+}$"
            J: 0
            P: -1
            mass: 5.27934
    $finals:
        D:
            display: "$D^{+}$"
            J: 0
            P: -1
            mass: 1.86965
        K:
            display: "$K^{+}$"
            J: 0
            P: -1
            mass: 0.493677
        D0:
            display: "D^{0}"
            J: 0
            P: -1
            mass: 1.86483
        pi: 
            display: "$\\pi^{-}$"
            J: 0
            P: -1
            mass: 0.13957039
    Dst:
        display: "$D^{*-}$"
        J: 1
        P: -1
        mass: 2.01026
        model: one
    $include: Resonances.yml
    DstD:
        # - Zc(3900)
        - X(3872)
        - X(3915)(0-)
        - chi(c2)(3930)
        - X(3940)(1+)
        - X(3993)
        # - XDstD1pp
        # - X(4020)
        - Psi(4040)
        # - Zc(4200)
        # - X(4100)
        # - all_psi
        # - chi(c1)(4274)
        - X(4300)
        # - X(4600)
        # - XDstD_Scan
        - NR(0-)SPp
        # - NR(1-)PPp
        - NR(1+)PSp
        - NR(0-)SPm
        - NR(1-)PPm
        # - NR(1+)PSm
    DstK: []
    DK: [X0(2900), X1(2900)]
    XDstD_Scan:
        model: {expr: -BWR}
    X0(2900):
        J: 0
        P: +1
        mass: 2.866
        width: 0.057
        # m_min: 2.86
        # m_max: 2.94
        # g_min: 0.01
        # g_max: 0.3
        # float: mg
    X1(2900):
        J: 1
        P: -1
        mass: 2.904
        width: 0.110
        # m_min: 2.86
        # m_max: 2.94
        # g_min: 0.01
        # g_max: 0.3
    # override params
    X(3915)(0-):
        model: {expr: -BWR}
    X(3940)(1+):
        model: BWR_LS
    Zc(3900):
        model: { expr: -BWR_LS}
    X(3872):
        model: { expr: -BWR_LS }
    X(4300):
        model: { expr: -BWR_LS }
    X(4020):
        model: BWR_LS
    chi(c2)(3930):
        model: {expr: -BWR}
    X(4300):
        model: BWR_LS
    X(3993):
        model: {expr: -BWR_LS}
    XDstD1pp:
        model: {expr: -BWR_LS}
    # NR(0-)SPp:
    #     model: {expr: -New}
    # NR(0-)SPm:
    #     model: New
    NR(1-)PPp:
        model: {expr: -one}
    NR(1+)PSp:
        model: {expr: -one}
    NR(0-)SPp:
        # model: {expr: -New}
        mass: 4.35
        model: {expr: -New }  # spline_c_idx}
        max_m: 4.8
        min_m: 3.87
        interp_N: 10
        with_bound: True
    NR(0-)SPm:
        # model: New
        mass: 4.35
        model: one # spline_c_idx
        max_m: 4.8
        min_m: 3.87
        interp_N: 10
        with_bound: True
    NR(1-)PPp:
        mass: 4.35
        model: {expr: -one} # spline_c_idx}
        <<: *point_pos1
        max_m: 4.8
        min_m: 3.87
        interp_N: 10
        with_bound: True
    NR(1-)PPm:
        mass: 4.35
        model: one # spline_c_idx
        max_m: 4.8
        min_m: 3.87
        <<: *point_pos1
        interp_N: 10
        with_bound: True


constrains:
  decay: { fix_chain_idx: 0, fix_chain_val: 1 }


plot:
    config:
        bins: 72
    mass:
        DK:
            display: "$M(D^{-}K^{+})$"
            range: [2.1, 3.3]
        DstK:
            display: "$M(D^{*+}K^{+})$"
            range: [2.2, 3.5]
        DstD:
            display: "$M(D^{*+}D^{-})$"
            range: [3.8, 5.2]
    angle:
        Bp/DK:
            alpha:
                display: "$\\phi_{1}$"
            cos(beta):
                display: "$\\cos(\\theta_1)$" 
                range: [-1, 1]
        Bp/DstK:
            alpha:
                display: "$\\phi_{2}$"
            cos(beta):
                display: "$\\cos(\\theta_2)$"
        Bp/DstD:
            alpha:
                display: "$\\phi_{3}$"
            cos(beta):
                display: "$\\cos(\\theta_3)$"
        DstD/Dst:
            alpha:
                display: "$\\phi_{11}$"
            cos(beta):
                display: "$\\cos(\\theta_{11})$"
        DstK/Dst:
            alpha:
                display: "$\\phi_{1}$"
            cos(beta):
                display: "$\\cos(\\theta_{21})$"
        DK/D:
            alpha:
                display: "$\\phi_{1}$"
            cos(beta):
                display: "$\\cos(\\theta_{31})$"
        DstD/Dst/D0:
            alpha:
                display: "$\\phi_{33}$"
            cos(beta):
                display: "$\\cos(\\theta_{33})$"
        DstK/Dst/D0:
            alpha:
                display: "$\\phi_{33}$"
            cos(beta):
                display: "$\\cos(\\theta_{33})$"
        DK/Dst/D0:
            alpha:
                display: "$\\phi_{33}$"
            cos(beta):
                display: "$\\cos(\\theta_{33})$"
    2Dplot:
        m_DstD & m_DstK:
            display: "$M_{D*D}$ vs $M_{D*K}$"
            plot_figs: ["data", "sideband", "fitted"]
